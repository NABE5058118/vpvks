# Команды для запуска проекта

## 1. Запуск TUNA туннеля

```bash
cd /Users/Galim/Documents/vpnn
tuna http 8080 > tuna_url.log 2>&1 &
```

После запуска проверьте URL туннеля:
```bash
cat tuna_url.log
```

## 2. Запуск backend-сервера

```bash
cd /Users/Galim/Documents/vpnn/backend
PORT=8080 python3 server.py
```

## 3. Запуск Telegram-бота

```bash
cd /Users/Galim/Documents/vpnn/bot
python3 main.py
```

## 4. Обновление конфигурации (если изменился URL туннеля)

После каждого запуска TUNA туннеля обновите файлы конфигурации с новым URL:

**Файл `/Users/Galim/Documents/vpnn/bot/.env`:**
```
BACKEND_URL=https://НОВЫЙ_URL.tuna.am
MINI_APP_URL=https://НОВЫЙ_URL.tuna.am/miniapp
```

**Файл `/Users/Galim/Documents/vpnn/backend/.env`:**
```
YOOKASSA_RETURN_URL=https://НОВЫЙ_URL.tuna.am/payment-success
```

## 5. Проверка работоспособности

После запуска всех сервисов проверьте:
- Доступность мини-приложения по адресу: `https://НОВЫЙ_URL.tuna.am/miniapp`
- Работу API по адресу: `https://НОВЫЙ_URL.tuna.am/api/status`

## 6. Остановка процессов

Для остановки всех процессов используйте:
```bash
pkill -f "main.py" && pkill -f "server.py" && pkill -f "tuna"
```

## 7. Проверка запущенных процессов

Для проверки запущенных процессов используйте:
```bash
ps aux | grep -E "(main.py|server.py|tuna)"
```

## Важные замечания

- URL туннеля меняется при каждом запуске TUNA
- Обязательно обновляйте конфигурационные файлы с новым URL
- В тестовом режиме оплата симулируется, реальный переход на ЮKassa не происходит
- Для получения ID пользователя в Telegram используйте бота @userinfobot